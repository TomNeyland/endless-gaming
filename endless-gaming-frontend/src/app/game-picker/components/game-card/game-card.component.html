<mat-card 
  class="game-card" 
  [class.highlight-hover]="highlightOnHover"
  [class.has-score]="showScore"
  [class.clickable]="hasValidGame()"
  (click)="openSteamStore()"
  appearance="outlined">
  
  @if (hasValidGame()) {
    <!-- Cover Image Header -->
    <div class="card-image-container">
      <!-- Loading spinner -->
      @if (imageLoading) {
        <div class="image-loading">
          <mat-spinner diameter="40"></mat-spinner>
        </div>
      }
      
      <!-- Game image -->
      <img 
        mat-card-image
        [src]="getCoverImage()" 
        [alt]="game!.name"
        (error)="onImageError($event)"
        (load)="onImageLoad()"
        [class.loaded]="!imageLoading"
        class="cover-image">
      
      <!-- Rank badge for recommendations -->
      @if (showScore && rank) {
        <div class="rank-badge mat-elevation-z2">
          <mat-icon>star</mat-icon>
          {{ rank }}
        </div>
      }
    </div>

    <!-- Game Content -->
    <mat-card-content>
      <mat-card-title>{{ game!.name }}</mat-card-title>
      
      <div class="metadata-row">
        <mat-card-subtitle class="price-tag">
          <mat-icon>attach_money</mat-icon>
          {{ getFormattedPrice() }}
        </mat-card-subtitle>
        <mat-card-subtitle class="genre-tag">
          <mat-icon>category</mat-icon>
          {{ getPrimaryGenre() }}
        </mat-card-subtitle>
      </div>

      <div class="developer mat-body-2">
        <mat-icon>business</mat-icon>
        {{ getDeveloperText() }}
      </div>

      <!-- Tags as Material Chips -->
      <div class="tags-section">
        <mat-chip-set>
          @for (tagData of getTopTags(3); track tagData.tag) {
            <mat-chip class="tag-chip">{{ tagData.tag }}</mat-chip>
          }
        </mat-chip-set>
      </div>

      <!-- Reviews -->
      <div class="reviews mat-body-2">
        <mat-icon>rate_review</mat-icon>
        {{ getReviewText() }}
      </div>

      <!-- Score for recommendations -->
      @if (showScore && score !== undefined) {
        <div class="score-section mat-headline-6">
          <mat-icon>analytics</mat-icon>
          Score: {{ getFormattedScore() }}
        </div>
      }
    </mat-card-content>
  } @else {
    <mat-card-content>
      <div class="empty-card mat-body-1">
        <mat-icon>error_outline</mat-icon>
        <p>No game data available</p>
      </div>
    </mat-card-content>
  }
</mat-card>